<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" />

    <style>
        body {
            font-family: "Inter", sans-serif;
            background: #f4f7fb;
            min-height: 100vh;
            padding: 40px 0;
        }

        .container-box {
            background: #ffffff;
            border-radius: 12px;
            padding: 35px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.07);
            max-width: 450px;
            margin: auto;
        }

        h1 {
            text-align: center;
            font-weight: 600;
            color: #2f3e53;
            margin-bottom: 30px;
        }

        label {
            font-weight: 500;
            color: #374151;
            margin-top: 10px;
        }

        input,
        select {
            border-radius: 8px !important;
            height: 45px;
            border: 1px solid #d1d5db !important;
            padding-left: 12px;
            font-size: 14px;
            transition: 0.2s;
        }

        input:focus,
        select:focus {
            border-color: #4c8bf5 !important;
            box-shadow: 0 0 3px #4c8bf555 !important;
        }

        .btn-instituicao {
            width: 100%;
            margin-bottom: 20px;
            height: 45px;
            border-radius: 8px;
            border: none;
            background: #e1e7ef;
            color: #2f3e53;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-instituicao:hover {
            background: #d4dce7;
        }

        .btn-submit {
            width: 100%;
            margin-top: 10px;
            height: 45px;
            border-radius: 8px;
            border: none;
            background: #2f74f5;
            color: white;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-submit:hover {
            background: #1e5cd8;
        }

        .back-btn {
            border: none;
            background: transparent;
            color: #2f3e53;
            font-size: 28px;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .back-btn:hover {
            color: #1e5cd8;
        }
    </style>
</head>

<body>

    <main>
        <a href="index.html">
            <button class="back-btn">&larr;</button>
        </a>

        <div class="container-box">
            <h1>Cadastro</h1>

            <!-- BOTÃO INSTITUIÇÃO -->
            <button class="btn-instituicao" type="button" onclick="window.location.href='form_cadastro_inst.html'">
                Sou uma Instituição
            </button>

            <form action="../backend/cadastro.php" method="post">
                <label for="nome">Nome Completo</label>
                <input type="text" name="nome_completo" id="nome" required />

                <label for="cpf">CPF</label>
                <input type="text" name="cpf" id="cpf" required />

                <label for="telefone">Telefone</label>
                <input type="tel" name="telefone" id="fone" maxlength="15" placeholder="(xx) xxxxx-xxxx" required />

                <label for="datanasc">Data de Nascimento</label>
                <input type="date" name="data_nascimento" id="datanasc" max="2020-12-31" min="1960-12-31" required />

                <label for="uf">UF</label>
                <select id="uf" name="uf" required onchange="carregarCidades()">
                    <option value="">Selecione</option>
                    <!-- estados -->
                    <option>AC</option>
                    <option>AL</option>
                    <option>AP</option>
                    <option>AM</option>
                    <option>BA</option>
                    <option>CE</option>
                    <option>DF</option>
                    <option>ES</option>
                    <option>GO</option>
                    <option>MA</option>
                    <option>MT</option>
                    <option>MS</option>
                    <option>MG</option>
                    <option>PA</option>
                    <option>PB</option>
                    <option>PR</option>
                    <option>PE</option>
                    <option>PI</option>
                    <option>RJ</option>
                    <option>RN</option>
                    <option>RS</option>
                    <option>RO</option>
                    <option>RR</option>
                    <option>SC</option>
                    <option>SP</option>
                    <option>SE</option>
                    <option>TO</option>
                </select>

                <label for="cidade">Cidade</label>
                <select id="cidade" name="cidade" required disabled>
                    <option value="">Selecione a UF primeiro</option>
                </select>

                <label for="email">Email</label>
                <input type="email" name="email" id="email" required />

                <label for="senha">Senha</label>
                <input type="password" name="senha" id="senha" required />

                <label for="confsenha">Confirmar Senha</label>
                <input type="password" name="confsenha" id="confsenha" required />

                <input class="btn-submit" type="submit" value="Cadastrar" />
            </form>
        </div>
    </main>

    <script>
        // Máscara telefone
        document.getElementById("fone").addEventListener("input", function (e) {
            let value = e.target.value.replace(/\D/g, "");
            if (value.length > 10) {
                value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, "($1) $2-$3");
            } else if (value.length > 6) {
                value = value.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, "($1) $2-$3");
            } else if (value.length > 2) {
                value = value.replace(/^(\d{2})(\d{0,5})/, "($1) $2");
            } else {
                value = value.replace(/^(\d*)/, "($1");
            }
            e.target.value = value;
        });

        // Máscara CPF
        const cpfInput = document.getElementById("cpf");
        cpfInput.addEventListener("input", function (e) {
            let v = e.target.value.replace(/\D/g, "");
            if (v.length > 11) v = v.slice(0, 11);
            if (v.length > 9) {
                v = v.replace(/^(\d{3})(\d{3})(\d{3})(\d{2}).*/, "$1.$2.$3-$4");
            } else if (v.length > 6) {
                v = v.replace(/^(\d{3})(\d{3})(\d{0,3}).*/, "$1.$2.$3");
            } else if (v.length > 3) {
                v = v.replace(/^(\d{3})(\d{0,3}).*/, "$1.$2");
            }
            e.target.value = v;
        });

        // Carregar cidades
        async function carregarCidades() {
            const uf = document.getElementById("uf").value;
            const cidadeSelect = document.getElementById("cidade");

            cidadeSelect.disabled = true;
            cidadeSelect.innerHTML = '<option value="">Carregando...</option>';

            if (!uf) {
                cidadeSelect.innerHTML = '<option value="">Selecione a UF primeiro</option>';
                return;
            }

            try {
                const response = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${uf}/municipios`);
                const data = await response.json();

                cidadeSelect.innerHTML = '<option value="">Selecione a Cidade</option>';
                data.forEach(cidade => {
                    cidadeSelect.innerHTML += `<option value="${cidade.nome}">${cidade.nome}</option>`;
                });

                cidadeSelect.disabled = false;
            } catch {
                cidadeSelect.innerHTML = '<option value="">Erro ao carregar</option>';
            }
        }
    </script>

</body>

</html>