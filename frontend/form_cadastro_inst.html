<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de Instituição</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Protest+Guerrilla&display=swap");
    @import url("https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&display=swap");

    html {
      background-image: url(../backend/img/fundo.png);
    }

    body {
      background-color: #f9c4d2c2;
      min-height: 100vh;
    }

    .protest-guerrilla-regular {
      font-family: "Protest Guerrilla", sans-serif;
      font-weight: 800;
      text-align: center;
      font-size: 9vh;
      background: linear-gradient(45deg, #cd7ccf, #3a0e66);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .comic-relief-regular {
      font-family: "Comic Relief", system-ui;
    }

    .submit {
      font-family: "Protest Guerrilla", sans-serif;
      background-color: #b2b0b3;
      color: #4e4e4e;
      font-weight: 800;
    }

    .submit:hover {
      background-color: #e788e9;
      color: #3a0e66;
    }

    form {
      margin-top: 10%;
      display: flex;
      flex-direction: column;
      height: auto;
    }

    .mid {
      display: flex;
      justify-content: center;
      width: 80%;
    }

    .col {
      display: flex;
      flex-direction: column;
    }

    input,
    select {
      width: 85%;
      height: 5vh;
      margin-bottom: 4%;
      border-radius: 15px;
      padding: 5px 10px;
    }

    .container {
      max-width: 40%;
    }

    main {
      width: 80%;
      margin-left: auto;
      margin-right: auto;
    }

    .cssbuttons-io {
      position: absolute;
      font-family: inherit;
      margin: 5%;
      margin-top: 1.5%;
      font-size: 18px;
      letter-spacing: 0.05em;
      border-radius: 0.9em;
      cursor: pointer;
      border: none;
      background: linear-gradient(to right, #8e2de2, #4a00e0);
      color: ghostwhite;
      overflow: hidden;
    }

    .cssbuttons-io svg {
      width: 1em;
      height: 1em;
      margin-right: 0.5em;
    }

    .cssbuttons-io span {
      position: relative;
      z-index: 10;
      transition: color 0.4s;
      display: inline-flex;
      align-items: center;
      padding: 0.5em 1em 0.5em 1em;
    }

    .cssbuttons-io::before,
    .cssbuttons-io::after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .cssbuttons-io::before {
      content: "";
      background: #000;
      width: 120%;
      left: -10%;
      transform: skew(30deg);
      transition: transform 0.4s cubic-bezier(0.3, 1, 0.8, 1);
    }

    .cssbuttons-io:hover::before {
      transform: translate3d(100%, 0, 0);
    }

    .cssbuttons-io:active {
      transform: scale(0.95);
    }

    .tipo-btn {
      width: 90%;
      height: 5vh;
      margin: 0 auto 6%;
      border-radius: 15px;
      border: solid 1.5px black;
      background: #b2b0b3;
      font-family: "Protest Guerrilla", sans-serif;
      font-weight: 800;
      font-size: 2.6vh;
      color: #4e4e4e;
      transition: 0.3s ease;
    }

    .tipo-btn:hover {
      background-color: #e788e9;
      color: #3a0e66;
      transform: scale(1.03);
    }
  </style>
</head>

<body>
  <main>
    <a href="index.html">
      <button class="cssbuttons-io">
        <span class="material-symbols-outlined"> </span>
      </button>
    </a>

    <div class="container">
      <h1 class="protest-guerrilla-regular">Cadastro de Instituição</h1>

      <button class="tipo-btn" onclick="window.location.href='form_cadastro.html'" type="button">
        Sou Usuário (Pessoa Física)
      </button>
      <!-- =============================== -->

      <form action="../backend/cadastro_inst.php" method="post">
        <label class="comic-relief-regular" for="nome">Nome da Instituição</label>
        <input type="text" name="nome" id="nome" required />

        <label class="comic-relief-regular" for="cnpj">CNPJ</label>
        <input type="text" name="cnpj" id="cnpj" maxlength="18" required />

        <label class="comic-relief-regular" for="certificacao">Certificação / Alvará</label>
        <input type="text" name="certificacao" id="certificacao" required />
        <label class="comic-relief-regular" for="telefone">Telefone</label>
        <input type="tel" name="telefone" id="fone" maxlength="15" placeholder="(xx) xxxxx-xxxx" required />
        <label class="comic-relief-regular" for="email">Especialidade</label>
        <select id="especialidade" name="especialidade">
          <option value="">Selecionar</option>
          <option value="banco_de_leite">Banco de Leite</option>
          <option value="hospitais_gerais">Hospitais Gerais</option>
          <option value="unidade_neo_natal">Unidade Neonatal</option>
          <option value="centros_de_saude">Centros de Saúde</option>
          <option value="clínicas_maternidade">Clínicas de Maternidade</option>
          <option value="instituicoes_caridade">Instituições de Caridade</option>
          <option value="consultorios_lactacao">Consultórios de Lactação</option>
        </select>

        <label class="comic-relief-regular" for="email">Email</label>
        <input type="email" name="email" id="email" required />
        <div class="mid">
          <div class="col">
            <label class="comic-relief-regular" for="rua">Rua</label>
            <input type="text" name="rua" id="rua" required />
          </div>

          <div class="col">
            <label class="comic-relief-regular" for="num">Número</label>
            <input type="number" name="num" id="num" required />
          </div>
        </div>

        <div class="mid">
          <div class="col">
            <label class="comic-relief-regular" for="uf">UF</label>
            <select class="form-select" id="uf" name="uf" required style="width: 80%">
              <option value="">Selecione</option>
              <option value="AC">AC</option>
              <option value="AL">AL</option>
              <option value="AP">AP</option>
              <option value="AM">AM</option>
              <option value="BA">BA</option>
              <option value="CE">CE</option>
              <option value="DF">DF</option>
              <option value="ES">ES</option>
              <option value="GO">GO</option>
              <option value="MA">MA</option>
              <option value="MT">MT</option>
              <option value="MS">MS</option>
              <option value="MG">MG</option>
              <option value="PA">PA</option>
              <option value="PB">PB</option>
              <option value="PR">PR</option>
              <option value="PE">PE</option>
              <option value="PI">PI</option>
              <option value="RJ">RJ</option>
              <option value="RN">RN</option>
              <option value="RS">RS</option>
              <option value="RO">RO</option>
              <option value="RR">RR</option>
              <option value="SC">SC</option>
              <option value="SP">SP</option>
              <option value="SE">SE</option>
              <option value="TO">TO</option>
            </select>
          </div>

          <div class="col">
            <label class="comic-relief-regular" for="cidade">Cidade</label>
            <select class="form-select" id="cidade" name="cidade" required style="width: 80%">
              <option value="">Selecione o estado primeiro</option>
            </select>
          </div>
        </div>
        <label class="comic-relief-regular" for="senha">Senha</label>
        <input type="password" name="senha" id="senha" required />

        <label class="comic-relief-regular" for="confsenha">
          Confirme sua Senha</label>
        <input type="password" name="confsenha" id="confsenha" required />

        <input class="submit" type="submit" value="Cadastrar" />
      </form>
    </div>
  </main>

  <script>

    function verificarSenhas() {
      var senha = document.getElementById("senha").value;
      var confirmarSenha = document.getElementById("confsenha").value;
      if (senha !== confirmarSenha) {
        document.getElementById("erro_senha").innerText = "As senhas não coincidem. Tente novamente!";
        return false;
      }
      return true;
    }
    // Máscara CNPJ
    document.getElementById("cnpj").addEventListener("input", function (e) {
      let v = e.target.value.replace(/\D/g, "");
      if (v.length > 14) v = v.slice(0, 14);
      if (v.length > 12)
        v = v.replace(
          /^(\d{2})(\d{3})(\d{3})(\d{4})(\d{0,2}).*/,
          "$1.$2.$3/$4-$5"
        );
      else if (v.length > 8)
        v = v.replace(/^(\d{2})(\d{3})(\d{3})(\d{0,4}).*/, "$1.$2.$3/$4");
      else if (v.length > 5)
        v = v.replace(/^(\d{2})(\d{3})(\d{0,3}).*/, "$1.$2.$3");
      else if (v.length > 2) v = v.replace(/^(\d{2})(\d{0,3}).*/, "$1.$2");
      e.target.value = v;
    });
    document.getElementById("fone").addEventListener("input", function (e) {
      let value = e.target.value.replace(/\D/g, "");
      if (value.length > 10) {
        value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, "($1) $2-$3");
      } else if (value.length > 6) {
        value = value.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, "($1) $2-$3");
      } else if (value.length > 2) {
        value = value.replace(/^(\d{2})(\d{0,5})/, "($1) $2");
      } else {
        value = value.replace(/^(\d*)/, "($1");
      }
      e.target.value = value;
    });

    // API IBGE
    const ufSelect = document.getElementById("uf");
    const cidadeSelect = document.getElementById("cidade");

    ufSelect.addEventListener("change", async () => {
      const uf = ufSelect.value;
      cidadeSelect.innerHTML = '<option value="">Carregando...</option>';

      if (!uf) {
        cidadeSelect.innerHTML =
          '<option value="">Selecione o estado primeiro</option>';
        return;
      }

      try {
        const response = await fetch(
          `https://servicodados.ibge.gov.br/api/v1/localidades/estados/${uf}/municipios`
        );
        const cidades = await response.json();
        cidadeSelect.innerHTML = '<option value="">Selecione</option>';
        cidades.forEach((c) => {
          const option = document.createElement("option");
          option.value = c.nome;
          option.textContent = c.nome;
          cidadeSelect.appendChild(option);
        });
      } catch (error) {
        cidadeSelect.innerHTML =
          '<option value="">Erro ao carregar cidades</option>';
      }
    });
  </script>
</body>

</html>